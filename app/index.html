<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tiles</title>
  <link rel="stylesheet" href="stylesheets/index.css">
  <script type="text/javascript" src="javascripts/index.js"></script>
</head>
<body>
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">Tiles</a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Import <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="#">JSON</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Export <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="#" id='export-as-json'>JSON</a></li>
              <li><a href="#">PNG</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Add <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a id='add-scene' href="#">Scene</a></li>
              <li><a id='add-floor' href="#">Floor</a></li>
              <li><a id='add-tileset' href="#">TileSet</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="container-fluid">
    <div class="row">
      <div id='scenes' class="col-md-8">
        <ul id='scene-tabs' class='nav nav-tabs'></ul>
        <ul id='scene-containers' class="tab-content"></ul>
      </div>
      <div id='tilesets' class="col-md-4">
        <div class="checkbox pull-right">
          <label>
            <input type="checkbox" id='show-hidden-tiles'> Show hidden tiles
          </label>
        </div>
        <ul id='tileset-tabs' class="nav nav-tabs"></ul>
        <ul id='tileset-containers' class='tab-content'></ul>
      </div>
    </div>
  </div>

  <!-- TEMPLATES -->
  <script id='tileset-tab' type='text/x-jrender'>
    <li data-model-id='{{:id}}' data-model-name='TileSet'><a href="#{{:id}}" data-toggle="tab">{{:name}}</a></li>
  </script>

  <script id='tileset-container' type='text/x-jrender'>
    <li class='tab-pane tileset-container' data-model-id='{{:id}}' id='{{:id}}'>
      <ul class='tiles-container'>
        <!-- TODO: most likely tiles should be rendered using the render method of tile class -->
        {{for tiles}}
          <li class='tile {{:display}}' data-model-id='{{:id}}'></li>
        {{/for}}
      </ul>
    </li>
  </script>

  <script id='scene-tab' type='text/x-jrender'>
    <li data-model-id='{{:id}}' data-model-name='Scene'><a data-toggle='tab' href='#{{:id}}'>{{:name}}</a></li>
  </script>

  <script id='scene-container' type='text/x-jrender'>
    <li class="tab-pane" id="{{:id}}" data-model-id="{{:id}}">
      <div class="row">
        <div class="col-md-3">
          <ul class='nav nav-pills nav-stacked layers-list'>
            {{for floors}}
              <li data-toggle='tab' data-model-id='{{:id}}'><a href="#">{{:name}}</a></li>
            {{/for}}
          </ul>
        </div>
        <div class="col-md-9">
          <div class="canvas-container">
            <canvas width='{{:width}}' height='{{:height}}'></canvas>
          </div>
        </div>
      </div>
    </li>
  </script>

  <script id='text-field' type='text/x-jrender'>
    <div class="form-group">
      <label>{{:name}}</label>
      <input type='text' name='{{:name}}' value='{{:value}}' class='form-control'/>
    </div>
  </script>
  <!-- / TEMPLATES -->

  <!-- CONTEXT MENUS -->
  <ul id="tile-context" class="dropdown-menu" role="menu" style="display:none" >
    <li><a tabindex="-1" href="#">Toggle</a></li>
  </ul>

  <ul id="tileset-tab-context" class="dropdown-menu" role="menu" style="display:none" >
    <li><a tabindex="-1" href="#" data-action='remove'>Remove</a></li>
    <li class='disabled'><a tabindex="-1" href="#" data-action='edit'>Edit</a></li>
  </ul>

  <ul id="floor-tab-context" class="dropdown-menu" role="menu" style="display:none" >
    <li><a tabindex="-1" href="#" data-action='remove'>Remove</a></li>
    <li class='disabled'><a tabindex="-1" href="#" data-action='edit'>Edit</a></li>
  </ul>

  <ul id="scene-pill-context" class="dropdown-menu" role="menu" style="display:none" >
    <li><a tabindex="-1" href="#" data-action='remove'>Remove</a></li>
    <li><a tabindex="-1" href="#" data-action='edit'>Edit</a></li>
  </ul>
  <!-- / CONTEXT MENUS -->

  <!-- MODALS -->
  <div class="modal fade" id="export-as-json-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-body">
          <textarea></textarea>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="edit-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-body">
          <form></form>
          <button>Update</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="add-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-body">
          <form></form>
          <button>Create</button>
        </div>
      </div>
    </div>
  </div>
  <!-- / MODALS -->

  <canvas style='display: none;' width='48' height='48' id='buffer'></canvas>
  <img style='display: none;height: 48px; width: 48px;' id='img-buffer'>
</body>
</html>
